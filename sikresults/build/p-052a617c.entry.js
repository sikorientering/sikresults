import{r as t,c as i,h as o,g as r}from"./p-4314c4b9.js";import{c as e}from"./p-01cdbf44.js";import{a as s}from"./p-acfbf7ac.js";import"./p-8bbe3720.js";import"./p-fc610f15.js";function n(t,i){var o;if(t.contains(i)||(null===(o=t.shadowRoot)||void 0===o?void 0:o.contains(i)))return!0;const r=function(t){const i=t.closest(".limel-portal--container");return i?i.portalSource:t.getRootNode().host}(i);return!!r&&n(t,r)}const c=class{constructor(o){t(this,o),this.close=i(this,"close",7),this.open=!1,this.portalId=e(),this.globalClickListener=this.globalClickListener.bind(this)}watchOpen(){this.setupClickHandler()}componentWillLoad(){this.setupClickHandler()}setupClickHandler(){this.open?document.addEventListener("click",this.globalClickListener,{capture:!0}):document.removeEventListener("click",this.globalClickListener)}render(){const t=this.getCssProperties(),i=getComputedStyle(this.host).getPropertyValue("--popover-z-index");return o("div",{class:"trigger-anchor"},o("slot",{name:"trigger"}),o("limel-portal",{visible:this.open,containerId:this.portalId,containerStyle:{"z-index":i}},o("limel-popover-surface",{contentCollection:this.host.children,style:t})))}globalClickListener(t){const i=n(this.host,t.target);this.open&&!i&&(t.stopPropagation(),this.close.emit())}getCssProperties(){const t=["--popover-surface-width","--popover-body-background-color","--popover-border-radius"],i=getComputedStyle(this.host),o=t.map((t=>i.getPropertyValue(t)));return function(t,i){return function(t,i,o){for(var r=-1,e=t.length,s=i.length,n={};++r<e;)o(n,t[r],r<s?i[r]:void 0);return n}(t||[],i||[],s)}(t,o)}get host(){return r(this)}static get watchers(){return{open:["watchOpen"]}}};c.style=".trigger-anchor{display:inline-block;position:relative}";export{c as limel_popover}